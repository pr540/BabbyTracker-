{% extends "base.html" %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <h2 style="color: #8B5CF6; font-size: 2rem; margin-bottom: 8px;">Verify OTP</h2>
        <p style="color: var(--text-muted); margin-bottom: 24px;">Sent to {{ phone }}</p>

        {% if error %}
        <div class="error-msg"
            style="color: #EF4444; background: #FEF2F2; padding: 12px; border-radius: 12px; margin-bottom: 16px; font-size: 0.9rem;">
            {{ error }}
        </div>
        {% endif %}

        <form action="/login/verify" method="post" class="auth-form">
            <input type="hidden" name="phone" value="{{ phone }}">
            <div class="otp-inputs" style="margin-bottom: 24px;">
                <input type="text" name="otp" placeholder="- - | -" required maxlength="4"
                    style="width: 100%; padding: 20px; border-radius: 20px; border: 2px solid #E5E7EB; text-align: center; font-size: 1.5rem; letter-spacing: 12px; font-weight: 700; outline: none; transition: border-color 0.2s;">
            </div>
            <div style="margin-bottom: 32px; font-size: 0.95rem; color: #374151">
                Didn't receive? <a href="/login" style="color: #8B5CF6; text-decoration: none; font-weight: 700;">Resend</a>
            </div>
            
            <button type="submit" class="primary-btn"
                style="width: 100%; background: #8B5CF6; color: white; border: none; padding: 18px; border-radius: 20px; font-size: 1rem; font-weight: 700; cursor: pointer; box-shadow: 0 4px 6px -1px rgba(139, 92, 246, 0.3);">Verify
                & Proceed</button>
        </form>
    </div>
</div>
{% if raw_otp %}
<script>
    // Diagnostic toast for developers if Twilio is not configured
    setTimeout(() => {
        showToast("DEBUG: OTP is {{ raw_otp }}", "fa-shield-halved");
    }, 500);
</script>
{% endif %}
{% endblock %}